<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Records</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <h1>{{ user.name }}'s Records</h1>
    <nav>
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('records') }}">Records</a>
      <a href="{{ url_for('leaderboard') }}">Leaderboard</a>
      <a href="{{ url_for('logout') }}">Logout</a>
    </nav>
  </header>

  <main>
    <div class="container">
      {% if records %}
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Hours</th>
              <th>Percentage</th>
              <th>Badge</th>
              <th>Weakest Subjects</th>
              <th>Recommendation</th>
              <th>Scores (All Subjects)</th>
              <th>Progress (Î” since prev)</th>
            </tr>
          </thead>
          <tbody>
            {% for rec in records %}
              <tr>
                <td>{{ rec.timestamp }}</td>
                <td>{{ rec.hours }}</td>
                <td>{{ rec.percentage }}</td>
                <td>{{ rec.badge }}</td>
                <td>{{ rec.weakest_subjects | join(', ') }}</td>
                <td>{{ rec.recommendation }}</td>
                <td>
                  {% for subj, score in rec.scores.items() %}
                    <strong>{{ subj }}:</strong> {{ score }}<br>
                  {% endfor %}
                </td>
                <td>
                  {% for subj, delta in rec.deltas.items() %}
                    <strong>{{ subj }}:</strong> 
                    {% if delta > 0 %}
                      +{{ delta }}
                    {% else %}
                      {{ delta }}
                    {% endif %}
                    <br>
                  {% endfor %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No records found yet. Go to <a href="{{ url_for('home') }}">Home</a> and add your first record.</p>
      {% endif %}
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Student Progress Tracker</p>
  </footer>
</body>
</html>
